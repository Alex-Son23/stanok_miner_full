# STANOK Bot (Django + Aiogram 3, Docker)

Лайт-реализация бота по ТЗ: регистрация, пополнение (ручное), покупка майнеров, клейм раз в 24ч, вывод с заморозкой, рефералка (1 уровень, 3%).

## Быстрый старт

1) Скопируйте `.env.example` в `.env` и заполните:
```
cp .env.example .env
```

2) Поднимите контейнеры:
```
docker compose up --build
```

3) При первом старте миграции и сид уровней выполняются автоматически. Бот стартует на поллинге.

### Полезные команды (в контейнере backend)
```bash
python manage.py migrate
python manage.py seed_levels
python manage.py runbot
```

## Переменные окружения

См. `.env.example`.

## Админ-команды (в Телеграме, доступ только ADMIN_TG_ID)
- /a_add <@username> <amount> — зачислить пополнение (DEPOSIT), реф-бонус 3% пригласителю
- /a_adjust <@username> <amount> <title> — ручная корректировка баланса (плюс/минус)
- /a_withdraws — список открытых выводов
- /a_withdraw_done <id> — подтвердить вывод
- /a_user <@username> — карточка пользователя

## Пользовательские разделы
- /start — регистрация (требуется username и TON-адрес)
- Главное меню: Купить майнер / Мои майнеры / Управление майнингом / Баланс / Пополнить STANOK / Вывести / Статистика / О проекте / Мои рефералы

## Замечания
- Таймзона: UTC
- Точность: Decimal(18,2), округление стандартное (quantize 0.01, ROUND_HALF_UP)
- Без Redis, без фоновых задач: всё считается «на лету»
